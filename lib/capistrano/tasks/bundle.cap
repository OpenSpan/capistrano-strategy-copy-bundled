namespace :bundle do
  task :backup_gems do
    on_rollback { run "cd #{File.join(shared_path, "bundle")} && tar xf /tmp/#{application}-Gems.tar && rm /tmp/#{application}-Gems.tar'" }
    run "cd #{File.join(shared_path, "bundle")} && tar cf /tmp/#{application}-Gems.tar ."
  end

  task :remove_gem_backup do
    run "rm /tmp/#{application}-Gems.tar"
  end
end
